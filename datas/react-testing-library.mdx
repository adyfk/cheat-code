---
title: "React Testing Library"
version: "12.1.2"
versionLink: "https://jestjs.io/"
category: "Testing"
language: "Javascript"
used: ['ReactJs']
author: "Adi Fatkhurozi"
authorLink: "https://github.com/adyfk"
description: "The React Testing Library is a very light-weight solution for testing React components. It provides light utility functions on top of react-dom and react-dom/test-utils, in a way that encourages better testing practices."
updateAt: "27/1/2022 20:05:00"
---             

## Getting Started

### Install & Init
```bash
    npm install --save-dev @testing-library/react
```
<note>
  Ref <link to='https://testing-library.com/docs/dom-testing-library/install'>Install</link>
</note>

## Resume
<table>
  <thead>
    <tr>
      <th></th>
      <th>No Match</th>
      <th>1 Match</th>
      <th>1+ Match</th>
      <th>Await?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>getBy</td>
      <td>throw</td>
      <td>return</td>
      <td>throw</td>
      <td>no</td>
    </tr>
    <tr>
      <td>findBy</td>
      <td>throw</td>
      <td>return</td>
      <td>throw</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>queryBy</td>
      <td>null</td>
      <td>return</td>
      <td>throw</td>
      <td>No</td>
    </tr>
    <tr>
      <td>getAllBy</td>
      <td>throw</td>
      <td>array</td>
      <td>array</td>
      <td>No</td>
    </tr>
    <tr>
      <td>findAllBy</td>
      <td>throw</td>
      <td>array</td>
      <td>array</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>queryAllBy</td>
      <td>[]</td>
      <td>array</td>
      <td>array</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

## API

### ByLabelText
* getByLabelText
* queryByLabelText
* getAllByLabelText
* queryAllByLabelText
* findByLabelText
* findAllByLabelText

### ByPlaceholderText
* getByPlaceholderText
* queryByPlaceholderText
* getAllByPlaceholderText
* queryAllByPlaceholderText
* findByPlaceholderText
* findAllByPlaceholderText

### ByText
* getByText
* queryByText
* getAllByText
* queryAllByText
* findByText
* findAllByText

### ByDisplayValue
* getByDisplayValue
* queryByDisplayValue
* getAllByDisplayValue
* queryAllByDisplayValue
* findByDisplayValue
* findAllByDisplayValue

### ByAltText 
* getByAltText
* queryByAltText
* getAllByAltText
* queryAllByAltText
* findByAltText
* findAllByAltText

### ByTitle
* getByTitle
* queryByTitle
* getAllByTitle
* queryAllByTitle
* findByTitle
* findAllByTitle

### ByRole
* getByRole
* queryByRole
* getAllByRole
* queryAllByRole
* findByRole
* findAllByRole

### ByTestId 
* getByTestId
* queryByTestId
* getAllByTestId
* queryAllByTestId
* findByTestId
* findAllByTestId


## Example

### Source Code
<note>fetch.js</note>

```js
  import React, {useState, useReducer} from 'react'
  import axios from 'axios'

  const initialState = {
    error: null,
    greeting: null,
  }

  function greetingReducer(state, action) {
    switch (action.type) {
      case 'SUCCESS': {
        return {
          error: null,
          greeting: action.greeting,
        }
      }
      case 'ERROR': {
        return {
          error: action.error,
          greeting: null,
        }
      }
      default: {
        return state
      }
    }
  }

  export default function Fetch({url}) {
    const [{error, greeting}, dispatch] = useReducer(
      greetingReducer,
      initialState,
    )
    const [buttonClicked, setButtonClicked] = useState(false)

    const fetchGreeting = async url =>
      axios
        .get(url)
        .then(response => {
          const {data} = response
          const {greeting} = data
          dispatch({type: 'SUCCESS', greeting})
          setButtonClicked(true)
        })
        .catch(error => {
          dispatch({type: 'ERROR', error})
        })

    const buttonText = buttonClicked ? 'Ok' : 'Load Greeting'

    return (
      <div>
        <button onClick={() => fetchGreeting(url)} disabled={buttonClicked}>
          {buttonText}
        </button>
        {greeting && <h1>{greeting}</h1>}
        {error && <p role="alert">Oops, failed to fetch!</p>}
      </div>
    )
  }
```

### Testing File
<note>fetch.test.js</note>

```js
  // __tests__/fetch.test.js
  import React from 'react'
  import {rest} from 'msw'
  import {setupServer} from 'msw/node'
  import {render, fireEvent, waitFor, screen} from '@testing-library/react'
  import '@testing-library/jest-dom'
  import Fetch from '../fetch'

  const server = setupServer(
    rest.get('/greeting', (req, res, ctx) => {
      return res(ctx.json({greeting: 'hello there'}))
    }),
  )

  beforeAll(() => server.listen())
  afterEach(() => server.resetHandlers())
  afterAll(() => server.close())

  test('loads and displays greeting', async () => {
    render(<Fetch url="/greeting" />)

    fireEvent.click(screen.getByText('Load Greeting'))

    await waitFor(() => screen.getByRole('heading'))

    expect(screen.getByRole('heading')).toHaveTextContent('hello there')
    expect(screen.getByRole('button')).toBeDisabled()
  })

  test('handles server error', async () => {
    server.use(
      rest.get('/greeting', (req, res, ctx) => {
        return res(ctx.status(500))
      }),
    )

    render(<Fetch url="/greeting" />)

    fireEvent.click(screen.getByText('Load Greeting'))

    await waitFor(() => screen.getByRole('alert'))

    expect(screen.getByRole('alert')).toHaveTextContent('Oops, failed to fetch!')
    expect(screen.getByRole('button')).not.toBeDisabled()
  })
```